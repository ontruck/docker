<html>
<head>
  <title>Ontruck Addresses</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
   integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
   crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
   integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
   crossorigin=""></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet-geocoder-mapzen/1.9.4/leaflet-geocoder-mapzen.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-geocoder-mapzen/1.9.4/leaflet-geocoder-mapzen.js"></script>
  <style>
   <!--  #map{ height: 800px; } -->
  </style>
</head>
<body>
  <div id="map"></div>

  <script>
    var map = L.map('map', {
      center:[42.35, -71.08],
      zoom: 3,
      minZoom:2,
      scrollWheelZoom: true
    });
    var params = {};
    var geocodingOptions = {
      focus: false,
      expanded: true,
      params: params,
      url: 'http://address.ontruck.tech:4000/v1',
      expanded: true,
      attribution: '<a href="https://openstreetmap.org/copyright">OpenStreetMap</a> and <a href="    https://geocode.earth/guidelines">others</a>'
    };

    L.control.geocoder(null, geocodingOptions).addTo(map);
    L.tileLayer('//{s}.tile.jawg.io/jawg-terrain/{z}/{x}/{y}.png?access-token=NRNKUBu9ZpBi0MwB4C59E9dbRiuIC6qvMu6BRrnFXfp8KRLinTsgmil2s7hoG823', { 
	 attribution: 'Map &copy; <a href="http://jawg.io" target="_blank" class="jawg-attrib"><b>Jawg</b>Maps</a>, Map data &copy; <a href="https://www.openstreetmap.org/copyright" target="_blank" class="osm-attrib">OpenStreetMap contributors</a>'
    }).addTo(map);

    var hash = new L.Hash(map);
    if( 'string' !== typeof location.hash || location.hash.split('/').length !== 3 ){

      // on error, set NYC
      map.on('locationerror', function(){ map.setView([40.7259, -73.9805], 12); });

      // try to locate using browser geolocation API
      map.locate({ setView: true, maxZoom: 16 });
    }
    
    L.control.scale().addTo(map);

    setInterval(function(){
       map.setView([0, 0]);
       setTimeout(function(){
          map.setView([60, 0]);
       }, 2000);
    }, 4000);

  </script>
  </body>
</html>
